# https://github.com/k8s-at-home/charts/tree/master/charts/unifi

resource "helm_release" "unifi" {
  name       = "unifi"
  repository = "https://k8s-at-home.com/charts"
  chart      = "unifi"
  version    = "1.0.0"
  namespace  = "unifi"
  depends_on = [kubernetes_namespace.unifi]
  values = [
    "${templatefile("${path.module}/unifi.yaml.tmpl",
      {
        nfs_storageclass: var.nfs_storageclass,
        metallb_pool_name: var.metallb_lan_pool_name,
        unifi_metallb_ip: var.unifi_metallb_ip,
        unifi_fqdn: var.unifi_fqdn
      }
    )}"
  ]
}
